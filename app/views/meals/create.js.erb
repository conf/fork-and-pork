<% if @meal.errors.any? %>
    <%= render 'meals/form', meal: @meal %>
<% else %>
    $('.js-meals-grid tr.add-meal').before('<%=j render @meal %>');
    <%= render 'meals/form', meal: Meal.new(user: current_user) %>
    $('.js-meals-grid tr.add-meal form').get(0).reset();
    $('.js-meals-grid tr.add-meal :input:visible:first').focus(); // focus first input
<% end %>
